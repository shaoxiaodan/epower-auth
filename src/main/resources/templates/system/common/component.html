<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">


<!-- 原始用户角色切换功能（备份） -->
<div id="myrolechange_bk">
	<h1>当前角色：</h1>
	<div>
		<form id="defroleform" method="post" onsubmit="return defRoleChange('defroleform','defroleselector')">
			<select id="defroleselector">
				<option th:each="role:${session.userroles}" th:value="${role.id}" th:text="${role.name}"
					th:selected="${role.id} == ${session.defrole.id}"></option>
			</select>
			<button type="submit">切换角色</button>
		</form>
	</div>
	<br>
</div>


<!-- 原始系统菜单列表（备份） -->
<div id="mymenu_bk">
	<h1>用户菜单：</h1>
	<div>
		<ul>
			<li th:each="menu:${session.defrole.menuList}">
				<th:block th:if="${not #lists.isEmpty(menu.urlList)}">
					<div th:each="url:${menu.urlList}">
						<a th:if="${url.isEntrance}" th:href="@{${url.path}}"
							th:text="${menu.name}">[[${menu.name}]]</a>
					</div>
				</th:block>
				<th:block th:if="${#lists.isEmpty(menu.urlList)}">
					[[${menu.name}]]
				</th:block>
			</li>
		</ul>
	</div>
</div>

<!-- 菜单组件 -->
<div id="mymenu">
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
		<div class="container">
			<a class="navbar-brand disabled" href="#"></i><strong>ePower System</strong></a><button
				class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown-1"
				aria-controls="navbarNavDropdown-1" aria-expanded="false" aria-label="Toggle navigation" style=""><span
					class="navbar-toggler-icon"></span></button>
			<div class="collapse navbar-collapse" id="navbarNavDropdown-1">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active"><a class="nav-link" th:href="@{/index}">首页<span
								class="sr-only">(current)</span></a></li>

					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false">切换角色</a>
						<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
							<div th:each="role:${session.userroles}">
								<a class="dropdown-item" th:href="@{/rolechange(def=${role.id})}">[[${role.name}]]</a>
							</div>
						</div>
					</li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false">系统菜单</a>
						<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
							<div th:each="menu:${session.defrole.menuList}">
								<th:block th:if="${not #lists.isEmpty(menu.urlList)}">
									<div th:each="url:${menu.urlList}">
										<a class="dropdown-item" th:if="${url.isEntrance}" th:href="@{${url.path}}"
											th:text="${menu.name}">[[${menu.name}]]</a>
									</div>
								</th:block>
								<th:block th:if="${#lists.isEmpty(menu.urlList)}">
									<a class="dropdown-item disabled" href="#">[[${menu.name}]]</a>
								</th:block>
							</div>

						</div>
					</li>
				</ul>
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link disabled text-light btn-round" href="#">您好，[[${session.defrole.name}]]！</a>
					</li>
					<li class="nav-item">
						<a class="nav-link bg-danger btn-round" th:href="@{logout}">退出</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
</div>


<!-- 分页组件 -->
<div id="mypagination">
	<!-- pagination -->
	<nav aria-label="Page navigation example">
		<ul class="pagination">
			<!-- 上一页 -->
			<li class="page-item">
				<a class="page-link" th:href="@{list(pageNum=${pageinfo.prePage})}"><i
						class="fas fa-angle-left"></i></a>
			</li>

			<li class="page-item" th:each="currpage:${pageinfo.navigatepageNums}"
				th:classappend="${currpage eq pageinfo.pageNum} ? 'active'">
				<a class="page-link" th:href="@{list(pageNum=${currpage})}" th:text="${currpage}"></a>
			</li>
			<!-- 下一页 -->
			<li class="page-item">
				<a class="page-link" th:href="@{list(pageNum=${pageinfo.nextPage})}"><i
						class="fas fa-angle-right"></i></a>
			</li>
		</ul>
	</nav>
</div>


<!-- Footer组件 -->
<div id="myfooter">
	<footer class="bg-primary pb-5 pt-4">
		<div class="container">
			<div class="row justify-content-center text-center">
				<div class="col-md-12">
					<span class="d-block mt-3 text-gray">
						<small class="d-block mt-3 mb-3 text-muted">© 2024 ePower System & Designed By Xiaodan SHAO.</small>
					</span>
				</div>
			</div>
		</div>
	</footer>
</div>


</html>